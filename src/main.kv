#:import webbrowser webbrowser
#:import Toolbar kivymd.toolbar.Toolbar
#:import MDSlider kivymd.slider.MDSlider
#:import MDTextField kivymd.textfields.MDTextField
#:import NavigationLayout kivymd.navigationdrawer.NavigationLayout


# need this hack to push widgets up
<PushUp@BoxLayout>:


<AboutScreen>:
    BoxLayout:
        orientation: "vertical"
        MDLabel:
            markup: True
            text: root.about_text_property
            theme_text_color: "Primary"
            on_ref_press: webbrowser.open(root.project_page_property)


<WalletConfigScreen>:
    BoxLayout:
        orientation: "vertical"
        MDTextField:
            id: path_id
            hint_text: "Wallet path"
        MDTextField:
            id: password_id
            hint_text: "Wallet password"
            password: True
        PushUp:


<BetSize>:
    orientation: "vertical"
    MDLabel:
        text: "Bet size"
        font_style: 'Title'
    BoxLayout:
        orientation: "horizontal"
        MDTextField:
            id: bet_size_input_id
            text: "0.1"
            width: dp(50)
            size_hint_x: None
        MDSlider:
            id: bet_size_slider_id
            range: 0, 10
            step: 0.1

<ChanceOfWinning>:
    orientation: "vertical"
    MDLabel:
        text: "Chance of winning"
        font_style: 'Title'
    BoxLayout:
        orientation: "horizontal"
        MDTextField:
            id: chances_input_id
            text: "50"
            width: dp(50)
            size_hint_x: None
        MDSlider:
            id: chances_slider_id
            range: 0, 100
            step: 1


<RollUnderRecap@BoxLayout>:
    orientation: "vertical"
    MDLabel:
        text: "Roll under 50"
        font_style: 'Headline'
    MDLabel:
        text: "With a wager of 2"
    MDLabel:
        text: "For a profit of 2"


<RollScreen>:
    BoxLayout:
        orientation: "vertical"
        MDLabel:
            text: "Place your bet"
            font_style: 'Headline'
        BetSize:
            id: bet_size_id
        ChanceOfWinning:
            id: chance_of_winning_id
        RollUnderRecap:
        PushUp:
        AnchorLayout:
            MDRaisedButton:
                id: roll_button_id
                text: "Roll"


<RollResultsScreen>:
    BoxLayout:
        orientation: "vertical"
        MDLabel:
            text: "TODO 1"
        MDLabel:
            text: "TODO 2"


<CustomToolbar>:
    title: "Etheroll"
    md_bg_color: app.theme_cls.primary_color
    background_palette: "Primary"
    background_hue: "500"

<Navigation@NavigationLayout>:
    MDNavigationDrawer:
        id: navigation_drawer_id
        NavigationDrawerToolbar:
            title: "Etheroll"
        NavigationDrawerIconButton:
            icon: "home"
            text: "Home"
            on_release:
                app.root.ids.screen_manager_id.transition.direction = "left"
                app.root.ids.screen_manager_id.current = "roll_screen"
        NavigationDrawerIconButton:
            icon: "key"
            text: "Wallet"
            on_release:
                app.root.ids.screen_manager_id.transition.direction = "right"
                app.root.ids.screen_manager_id.current = "wallet_config_screen"
        NavigationDrawerIconButton:
            icon: "help"
            text: "About"
            on_release:
                app.root.ids.screen_manager_id.transition.direction = "right"
                app.root.ids.screen_manager_id.current = "about_screen"

Controller:
    Navigation:
        id: navigation_id
        BoxLayout:
            orientation: "vertical"
            CustomToolbar:
                id: toolbar_id
            ScreenManager:
                id: screen_manager_id
                RollScreen:
                    id: roll_screen_id
                    name: "roll_screen"
                RollResultsScreen:
                    id: roll_results_screen_id
                    name: "roll_results_screen"
                WalletConfigScreen:
                    id: wallet_config_screen_id
                    name: "wallet_config_screen"
                AboutScreen:
                    id: about_screen_id
                    name: "about_screen"
